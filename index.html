<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Website Bán PC</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 1rem;
      max-width: 900px;
      margin: 0 auto;
      background: #f9f9f9;
    }
    h1 {
      text-align: center;
      margin-bottom: 1rem;
    }
    #search-bar {
      width: 100%;
      padding: 0.5rem;
      font-size: 1rem;
      margin-bottom: 1rem;
    }
    .filters {
      display: flex;
      gap: 1rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
      justify-content: center;
    }
    .filters label {
      cursor: pointer;
    }
    #sort-select {
      padding: 0.3rem;
      font-size: 1rem;
    }
    #product-list {
      display: grid;
      grid-template-columns: repeat(auto-fill,minmax(180px,1fr));
      gap: 1rem;
    }
    .product {
      background: white;
      border: 1px solid #ddd;
      border-radius: 5px;
      padding: 0.5rem;
      text-align: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    .product img {
      max-width: 100%;
      height: 120px;
      object-fit: contain;
      margin-bottom: 0.5rem;
    }
    .price {
      font-weight: bold;
      color: #c33;
      margin-bottom: 0.5rem;
    }
    button {
      background: #28a745;
      color: white;
      border: none;
      padding: 0.4rem 0.8rem;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: background 0.3s;
    }
    button:hover {
      background: #218838;
    }
    #cart {
      margin-top: 2rem;
      background: white;
      border: 1px solid #ddd;
      padding: 1rem;
      border-radius: 5px;
    }
    #cart h2 {
      margin-top: 0;
    }
    #cart-items {
      max-height: 300px;
      overflow-y: auto;
      margin-bottom: 1rem;
    }
    .cart-item {
      display: flex;
      gap: 1rem;
      margin-bottom: 1rem;
      border-bottom: 1px solid #eee;
      padding-bottom: 0.5rem;
    }
    .cart-item img {
      width: 80px;
      height: 60px;
      object-fit: contain;
      border: 1px solid #ccc;
      border-radius: 3px;
    }
    .cart-item-info {
      flex: 1;
    }
    .cart-item-info strong {
      display: block;
      margin-bottom: 0.3rem;
    }
    .quantity-controls {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 0.3rem;
    }
    .quantity-controls button {
      background: #007bff;
      padding: 0.2rem 0.6rem;
    }
    .quantity-controls button:hover {
      background: #0056b3;
    }
    .cart-item-remove {
      background: #dc3545;
      padding: 0 0.6rem;
      font-weight: bold;
      font-size: 1.2rem;
      line-height: 1;
      height: 30px;
      align-self: center;
    }
    .cart-item-remove:hover {
      background: #b02a37;
    }
    #cart-summary {
      font-weight: bold;
      margin-bottom: 1rem;
    }
    #cart-actions {
      display: flex;
      gap: 1rem;
      justify-content: flex-end;
    }
    #cart-actions button {
      background: #ffc107;
      color: #333;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.3s;
    }
    #cart-actions button:hover {
      background: #e0a800;
    }
  </style>
</head>
<body>
  <h1>Website Bán PC</h1>

  <input type="search" id="search-bar" placeholder="Tìm kiếm sản phẩm..." aria-label="Tìm kiếm sản phẩm" />

  <div class="filters" role="region" aria-label="Bộ lọc sản phẩm">
    <div>
      <strong>Lọc theo giá:</strong><br />
      <label><input type="radio" name="price-filter" value="all" checked /> Tất cả</label>
      <label><input type="radio" name="price-filter" value="low" /> Dưới 15,000¥</label>
      <label><input type="radio" name="price-filter" value="mid" /> 15,000¥ - 25,000¥</label>
      <label><input type="radio" name="price-filter" value="high" /> Trên 25,000¥</label>
    </div>

    <div>
      <label for="sort-select"><strong>Sắp xếp:</strong></label>
      <select id="sort-select" aria-label="Chọn cách sắp xếp sản phẩm">
        <option value="asc">Giá tăng dần</option>
        <option value="desc">Giá giảm dần</option>
      </select>
    </div>
  </div>

  <section id="product-list" aria-live="polite" aria-label="Danh sách sản phẩm">
    <!-- Sản phẩm sẽ được render ở đây -->
  </section>

  <section id="cart" aria-label="Giỏ hàng">
    <h2>Giỏ hàng (<span id="cart-count">0</span> sản phẩm)</h2>
    <div id="cart-items" role="list">
      <p>Giỏ hàng trống.</p>
    </div>
    <div id="cart-summary">Tổng: 0¥</div>
    <div id="cart-actions">
      <button id="clear-cart-btn" aria-label="Xoá toàn bộ giỏ hàng">Xoá giỏ hàng</button>
      <button id="checkout-btn" aria-label="Thanh toán">Thanh toán</button>
    </div>
  </section>

  <script>
    const products = [
      { id: 1, name: "PC Gaming Cấu Hình Mạnh", price: 45000, image: "https://cdn.tgdd.vn/Products/Images/42/296571/pc-van-phong-pcgaming-min-600x600.jpg" },
      { id: 2, name: "PC Case Antec NX210", price: 13000, image: "https://cdn.tgdd.vn/Products/Images/42/295471/case-antec-nx210-1.jpg" },
      { id: 3, name: "PC Case Cooler Master MasterBox NR200", price: 16000, image: "https://cdn.tgdd.vn/Products/Images/42/290103/case-cooler-master-masterbox-nr200-600x600.jpg" },
      { id: 4, name: "PC Case Lian Li PC-O11 Dynamic", price: 30000, image: "https://cdn.tgdd.vn/Products/Images/42/292320/case-lian-li-pc-o11-dynamic-600x600.jpg" },
      { id: 5, name: "PC Case Corsair iCUE 4000X RGB", price: 25000, image: "https://cdn.tgdd.vn/Products/Images/42/291780/case-corsair-icue-4000x-rgb-600x600.jpg" },
      { id: 6, name: "PC Case NZXT H510 Elite", price: 27000, image: "https://cdn.tgdd.vn/Products/Images/42/291900/case-nzxt-h510-elite-600x600.jpg" },
      { id: 7, name: "PC Case Phanteks Eclipse P400A", price: 14000, image: "https://cdn.tgdd.vn/Products/Images/42/292221/case-phanteks-eclipse-p400a-600x600.jpg" },
      { id: 8, name: "PC Case Thermaltake Versa H18", price: 12000, image: "https://cdn.tgdd.vn/Products/Images/42/295210/case-thermaltake-versa-h18-600x600.jpg" }
    ];

    let cart = [];

    // Elements
    const productListEl = document.getElementById("product-list");
    const cartItemsEl = document.getElementById("cart-items");
    const cartCountEl = document.getElementById("cart-count");
    const cartTotalEl = document.getElementById("cart-summary");
    const searchBarEl = document.getElementById("search-bar");
    const priceFilterEls = document.querySelectorAll('input[name="price-filter"]');
    const sortSelectEl = document.getElementById("sort-select");
    const clearCartBtn = document.getElementById("clear-cart-btn");
    const checkoutBtn = document.getElementById("checkout-btn");

    // Render products with filters and search
    function renderProducts() {
      let filtered = products;

      // Search filter
      const searchTerm = searchBarEl.value.toLowerCase().trim();
      if (searchTerm) {
        filtered = filtered.filter(p => p.name.toLowerCase().includes(searchTerm));
      }

      // Price filter
      const selectedPriceFilter = document.querySelector('input[name="price-filter"]:checked').value;
      if (selectedPriceFilter !== "all") {
        filtered = filtered.filter(p => {
          if (selectedPriceFilter === "low") return p.price < 15000;
          if (selectedPriceFilter === "mid") return p.price >= 15000 && p.price <= 25000;
          if (selectedPriceFilter === "high") return p.price > 25000;
        });
      }

      // Sort
      const sortMode = sortSelectEl.value;
      if (sortMode === "asc") {
        filtered.sort((a, b) => a.price - b.price);
      } else if (sortMode === "desc") {
        filtered.sort((a, b) => b.price - a.price);
      }

      // Render html
      productListEl.innerHTML = filtered.map(p => `
        <article class="product" tabindex="0" aria-label="${p.name}, giá ${p.price.toLocaleString()} yên">
          <img src="${p.image}" alt="Hình ảnh ${p.name}" />
          <h3>${p.name}</h3>
          <div class="price">${p.price.toLocaleString()}¥</div>
          <button aria-label="Thêm ${p.name} vào giỏ hàng" data-id="${p.id}">Thêm vào giỏ</button>
        </article>
      `).join("");

      // Add button events
      productListEl.querySelectorAll("button").forEach(btn => {
        btn.addEventListener("click", e => {
          const id = +e.currentTarget.dataset.id;
          addToCart(id);
        });
      });
    }

    // Add to cart
    function addToCart(id) {
      const index = cart.findIndex(item => item.id === id);
      if (index >= 0) {
        cart[index].quantity++;
      } else {
        cart.push({ id, quantity: 1 });
      }
      renderCart();
    }

    // Render cart
    function renderCart() {
      if (cart.length === 0) {
        cartItemsEl.innerHTML = "<p>Giỏ hàng trống.</p>";
        cartCountEl.textContent = "0";
        cartTotalEl.textContent = "Tổng: 0¥";
        return;
      }
      let total = 0;
      cartItemsEl.innerHTML = cart.map(item => {
        const p = products.find(prod => prod.id === item.id);
        const itemTotal = p.price * item.quantity;
        total += itemTotal;
        return `
          <div class="cart-item" role="listitem">
            <img src="${p.image}" alt="Hình ảnh ${p.name}" />
            <div class="cart-item-info">
              <strong>${p.name}</strong>
              <div>${p.price.toLocaleString()}¥ x ${item.quantity} = ${(itemTotal).toLocaleString()}¥</div>
              <div class="quantity-controls" aria-label="Điều chỉnh số lượng ${p.name}">
                <button aria-label="Giảm số lượng" data-id="${item.id}" data-action="decrease">-</button>
                <span aria-live="polite" aria-atomic="true">${item.quantity}</span>
                <button aria-label="Tăng số lượng" data-id="${item.id}" data-action="increase">+</button>
                <button class="cart-item-remove" aria-label="Xoá sản phẩm" data-id="${item.id}">&times;</button>
              </div>
            </div>
          </div>
        `;
      }).join("");
      cartCountEl.textContent = cart.reduce((a,b) => a + b.quantity, 0);
      cartTotalEl.textContent = `Tổng: ${total.toLocaleString()}¥`;

      // Quantity controls
      cartItemsEl.querySelectorAll(".quantity-controls button").forEach(btn => {
        btn.addEventListener("click", e => {
          const id = +e.currentTarget.dataset.id;
          const action = e.currentTarget.dataset.action;
          if (action === "increase") {
            changeQuantity(id, 1);
          } else if (action === "decrease") {
            changeQuantity(id, -1);
          }
        });
      });

      // Remove item
      cartItemsEl.querySelectorAll(".cart-item-remove").forEach(btn => {
        btn.addEventListener("click", e => {
          const id = +e.currentTarget.dataset.id;
          removeFromCart(id);
        });
      });
    }

    // Change quantity in cart
    function changeQuantity(id, delta) {
      const index = cart.findIndex(item => item.id === id);
      if (index >= 0) {
        cart[index].quantity += delta;
        if (cart[index].quantity <= 0) {
          cart.splice(index, 1);
        }
        renderCart();
      }
    }

    // Remove from cart
    function removeFromCart(id) {
      cart = cart.filter(item => item.id !== id);
      renderCart();
    }

    // Clear cart
    clearCartBtn.addEventListener("click", () => {
      if (confirm("Bạn có chắc muốn xoá toàn bộ giỏ hàng không?")) {
        cart = [];
        renderCart();
      }
    });

    // Checkout (simple alert)
    checkoutBtn.addEventListener("click", () => {
      if (cart.length === 0) {
        alert("Giỏ hàng đang trống!");
        return;
      }
      let orderDetails = cart.map(item => {
        const p = products.find(prod => prod.id === item.id);
        return `${p.name} x${item.quantity}`;
      }).join("\n");
      alert(`Cảm ơn bạn đã đặt hàng:\n${orderDetails}\n${cartTotalEl.textContent}`);
      cart = [];
      renderCart();
    });

    // Search bar event
    searchBarEl.addEventListener("input", renderProducts);

    // Price filter event
    priceFilterEls.forEach(radio => {
      radio.addEventListener("change", renderProducts);
    });

    // Sort select event
    sortSelectEl.addEventListener("change", renderProducts);

    // Initial render
    renderProducts();
    renderCart();
  </script>
</body>
</html>
